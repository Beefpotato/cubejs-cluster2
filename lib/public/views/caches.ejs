<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>value</th>
      <th>persisted</th>
      <th>expire</th>
    </tr>
  </thead>
  <tbody id="caches_body">
    <%for(var k = 0, len = caches.length; k < len; k += 1){
      var entry = caches[k];%>
    <tr id="<%=entry.key%>">
      <td><%=entry.key%></td>
      <td><%=JSON.stringify(entry.value)%></td>
      <td><%=entry.persist ? true : false%></td>
      <td><%=entry.expire ? entry.expire + 'ms' : ''%></td>
    </tr>
    <%}%>
  </tbody>
</table>
<script type="text/javascript">

  var socket = socket || io.connect('http://localhost');

  socket.on('cache-changed', function(key, value, persist, expire){

    var row = $('#' + key);
    if(row.length){
      row.html('<tr id="' + key + '">' +
        '<td>' + key + '</td>' +
        '<td>' + JSON.stringify(value) + '</td>' +
        '<td>' + persist ? true : false + '</td>' +
        '<td>' + (expire ? expire + 'ms' : '') + '</td></tr>');
    }
    else{
      $('#caches_body').append('<tr id="' + key + '">' +
        '<td>' + key + '</td>' +
        '<td>' + JSON.stringify(value) + '</td>' +
        '<td>' + (persist ? true : false) + '</td>' +
        '<td>' + (expire ? expire + 'ms' : '') + '</td></tr>');
    }
  });

</script>