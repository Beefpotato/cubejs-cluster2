<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <%for(var w = 0, len = pids.length; w < len; w +=1){
          var pid = pids[w];%>
        <th>
          <div class="dropdown">
            <a id="workerDropDownTrigger<%=pid%>" data-toggle="dropdown" href="#">worker: <%=pid%></a><b class="caret"></b>

            <%if(debugging && debugging === pid){%>
              <ul class="dropdown-menu" role="menu" aria-labelledby="workerDropDown<%=pid%>" id="workerDropDown<%=pid%>">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="<%=inspector%>" target="_blank"><%=inspector%></a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#" id="debug-start-<%=pid%>">debug start</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#" id="debug-stop-<%=pid%>">debug stop</a></li>
              </ul>
            <%}else if(debugging){%>
              <ul class="dropdown-menu" role="menu" aria-labelledby="workerDropDown<%=pid%>" id="workerDropDown<%=pid%>">
              </ul>
            <%}else{%>
              <ul class="dropdown-menu" role="menu" aria-labelledby="workerDropDownTrigger<%=pid%>" id="workerDropDown<%=pid%>">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#" id="debug-<%=pid%>" class="debug-live" pid="<%=pid%>">debug</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#" class="debug-fresh">debug new</a></li>
              </ul>
            <%}%>
          </div>        
        </th>
      <%}%>
    </tr>
  </thead>
  <tbody>

    <%for(var s = 0, slen = statuses.length; s < slen; s += 1){
        var status = statuses[s];%>
      <tr>
        <td><%=status.name%></td>
        <%for(var w = 0, wlen = pids.length; w < wlen; w += 1){
          var pid = pids[w];%>
            <td>
              <%for(var st in status[pid] || {}){%>
                <div>
                  <span><%=st%></span><span> : </span><span><%=JSON.stringify(status[pid][st])%></span>
                </div>
              <%}%>
            </td>
        <%}%>
      </tr>
    <%}%>
  </tbody>
</table>

<%if(!debugging){%>
  <script type="text/javascript">

    var socket = socket || io.connect('http://localhost');

    $('.debug-live').click(function(event){

      console.log('debugging live');
      socket.emit('debug', $(event.target).attr('pid'));
    });

    $('.debug-fresh').click(function(elem){

      console.log('debugging fresh');
      socket.emit('debug');
    });

  </script>
<%}
else{%>
  <script type="text/javascript">

    var socket = socket || io.connect('http://localhost');

      $('#debug-start-<%=debugging%>').click(function(){
        socket.emit('debug-start');
      });

      $('#debug-stop-<%=debugging%>').click(function(){

        console.log('debug finished');
        socket.emit('debug-finished');
      });
  </script>
<%}%>
